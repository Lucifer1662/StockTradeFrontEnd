(this["webpackJsonpstock-front-end"]=this["webpackJsonpstock-front-end"]||[]).push([[0],{220:function(e,t,n){},234:function(e,t,n){"use strict";n.r(t);var r=n(3),c=n(0),a=n.n(c),s=n(11),i=n.n(s),u=(n(220),n(14)),o=n(15),j=n(207),l=n(24),b=n(259),d=n(262),h=n(72),f=n(263),O=n(264),x=n(267),p=n(268),v=n(10),m=n.n(v),g=n(23),y=n(18),k=n(12),w=n(62),S=n(63),F=n(198),A=n.n(F),C="https://frozen-bayou-79634.herokuapp.com";function E(e,t){return B.apply(this,arguments)}function B(){return(B=Object(y.a)(m.a.mark((function e(t,n){var r,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=n.replace(new RegExp(".*\\|"),""),e.next=4,fetch(C+"/orders?uid="+r,{headers:{Authorization:"Bearer ".concat(t)},method:"GET"});case 4:return c=e.sent,e.next=7,c.json();case 7:return e.abrupt("return",e.sent);case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:return e.abrupt("return",[]);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}var P=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0;Object(w.a)(this,e),this.orders=t,this.refreshFunc=n}return Object(S.a)(e,[{key:"refresh",value:function(){this.refreshFunc&&this.refreshFunc()}}]),e}(),T=Object(c.createContext)(new P);function I(e){var t=function(){var e=Object(c.useState)([]),t=Object(o.a)(e,2),n=t[0],r=t[1],a=Object(k.b)(),s=a.user,i=a.isAuthenticated,u=a.getAccessTokenSilently,j=function(){var e=Object(y.a)(m.a.mark((function e(){var t,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=8;break}return e.next=3,u();case 3:return t=e.sent,e.next=6,E(t,s.sub);case 6:c=e.sent,A.a.isEqual(c,n)||r(c);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){j()}),[s,i]),[n,j]}(),n=Object(o.a)(t,2),a=n[0],s=n[1];return Object(r.jsx)(T.Provider,Object(u.a)(Object(u.a)({},e),{},{value:new P(a,s)}))}function R(){return Object(c.useContext)(T)}function z(e,t){return q.apply(this,arguments)}function q(){return(q=Object(y.a)(m.a.mark((function e(t,n){var r,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=n.replace(new RegExp(".*\\|"),""),e.next=4,fetch(C+"/userFunds?uid="+r,{headers:{Authorization:"Bearer ".concat(t)},method:"GET"});case 4:return c=e.sent,e.next=7,c.json();case 7:return e.abrupt("return",e.sent);case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:return e.abrupt("return",[]);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}var N=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{unsettledFunds:void 0,buyingPower:void 0},n=arguments.length>1?arguments[1]:void 0;Object(w.a)(this,e),this.userFunds=t,this.refreshFunc=n}return Object(S.a)(e,[{key:"refresh",value:function(){this.refreshFunc&&this.refreshFunc()}}]),e}(),J=Object(c.createContext)(new N);function L(e){var t=function(){var e=Object(c.useState)({unsettledFunds:void 0,buyingPower:void 0}),t=Object(o.a)(e,2),n=t[0],r=t[1],a=Object(k.b)(),s=a.user,i=a.isAuthenticated,u=a.getAccessTokenSilently,j=function(){var e=Object(y.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=8;break}return e.next=3,u();case 3:return t=e.sent,e.next=6,z(t,s.sub);case 6:n=e.sent,r(void 0!==n?n:{unsettledFunds:void 0,buyingPower:void 0});case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){j()}),[s,i]),[n,j]}(),n=Object(o.a)(t,2),a=n[0],s=n[1];return console.log(a),Object(r.jsx)(J.Provider,Object(u.a)(Object(u.a)({},e),{},{value:new N(a,s)}))}function W(){return Object(c.useContext)(J)}function _(e,t,n){return D.apply(this,arguments)}function D(){return(D=Object(y.a)(m.a.mark((function e(t,n,r){var c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c=n.replace(new RegExp(".*\\|"),""),e.next=4,fetch(C+"/order?uid="+c,{headers:{Authorization:"Bearer ".concat(t)},method:"POST",body:JSON.stringify(r)});case 4:e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}var G=Object(j.a)({palette:{primary:l.a.green,secondary:l.a.red}});function U(e){var t=parseInt(e);return isNaN(t)?void 0:t}function V(){var e=function(){var e=R(),t=W(),n=Object(c.useState)([]),r=Object(o.a)(n,2),a=r[0],s=r[1],i=Object(k.b)(),u=i.user,j=i.isAuthenticated,l=i.getAccessTokenSilently,b=function(){var n=Object(y.a)(m.a.mark((function n(){var r,c,i;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!j){n.next=11;break}return n.next=3,l();case 3:return r=n.sent,c=Object(g.a)(a),a.length>0&&s([]),i=c.map((function(e){return _(r,u.sub,e)})),n.next=9,Promise.all(i);case 9:e.refresh(),t.refresh();case 11:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return Object(c.useEffect)((function(){b()}),[u,j,a]),function(e){s([].concat(Object(g.a)(a),[e]))}}(),t=Object(k.b)().user.sub.replace(new RegExp(".*\\|"),""),n=a.a.useState({stock:"VAS",price:20,volume:1}),s=Object(o.a)(n,2),i=s[0],j=s[1];return console.log(i),Object(r.jsx)(b.a,{children:Object(r.jsx)(d.a,{children:Object(r.jsxs)(a.a.Fragment,{children:[Object(r.jsx)(h.a,{variant:"h6",gutterBottom:!0,children:"Payment method"}),Object(r.jsxs)(f.a,{container:!0,spacing:3,children:[Object(r.jsx)(f.a,{item:!0,xs:12,md:4,children:Object(r.jsx)(O.a,{required:!0,label:"Stock Code",fullWidth:!0,onChange:function(e){return j(Object(u.a)(Object(u.a)({},i),{},{stock:e.target.value}))},value:i.stock})}),Object(r.jsx)(f.a,{item:!0,xs:12,md:4,children:Object(r.jsx)(O.a,{required:!0,id:"price",label:"Price",fullWidth:!0,onChange:function(e){return j(Object(u.a)(Object(u.a)({},i),{},{price:Number(e.target.value)}))},value:i.price})}),Object(r.jsx)(f.a,{item:!0,xs:12,md:4,children:Object(r.jsx)(O.a,{type:"number",required:!0,id:"volume",label:"Volume",helperText:"number of stocks",fullWidth:!0,value:i.volume,onChange:function(e){return j(Object(u.a)(Object(u.a)({},i),{},{volume:U(e.target.value)}))}})}),Object(r.jsx)(f.a,{justify:"space-evenly",container:!0,children:Object(r.jsxs)(x.a,{theme:G,children:[Object(r.jsx)(p.a,{variant:"contained",color:"primary",onClick:function(){i.stock&&i.price&&i.volume&&e(Object(u.a)(Object(u.a)({},i),{},{isBuy:!0,uid:t}))},children:"Buy Order"}),Object(r.jsx)(p.a,{variant:"contained",color:"secondary",onClick:function(){i.stock&&i.price&&i.volume&&e(Object(u.a)(Object(u.a)({},i),{},{isBuy:!1,uid:t}))},children:"Sell Order"})]})})]})]})})})}var $=n(269),K=n(270),M=n(205),X=n.n(M);function H(e,t,n){return Q.apply(this,arguments)}function Q(){return(Q=Object(y.a)(m.a.mark((function e(t,n,r){var c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c=n.replace(new RegExp(".*\\|"),""),e.next=4,fetch(C+"/order?uid="+c+"&orderid="+r,{headers:{Authorization:"Bearer ".concat(t)},method:"DELETE"});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function Y(e){var t=e.orderId,n=function(){var e=R(),t=W(),n=Object(c.useState)([]),r=Object(o.a)(n,2),a=r[0],s=r[1],i=Object(k.b)(),u=i.user,j=i.isAuthenticated,l=i.getAccessTokenSilently,b=function(){var n=Object(y.a)(m.a.mark((function n(){var r,c,i;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!j){n.next=11;break}return n.next=3,l();case 3:return r=n.sent,c=Object(g.a)(a),a.length>0&&s([]),i=c.map((function(e){return H(r,u.sub,e)})),n.next=9,Promise.all(i);case 9:e.refresh(),t.refresh();case 11:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return Object(c.useEffect)((function(){b()}),[u,j,a]),function(e){s([].concat(Object(g.a)(a),[e]))}}();return Object(r.jsxs)($.a,{onClick:function(){n(t)},children:[" ",Object(r.jsx)(X.a,{})]})}function Z(e){var t=e.id,n=e.isBuy,c=e.price,a=e.volume,s=(n?"Buy":"Sell")+" "+e.stock;return Object(r.jsx)(b.a,{children:Object(r.jsxs)(d.a,{children:[Object(r.jsx)(K.a,{title:s,action:Object(r.jsx)(Y,{orderId:t})}),Object(r.jsxs)(h.a,{children:["$",c," x ",a]})]})})}function ee(){var e=Object(c.useContext)(T);return Object(r.jsxs)("div",{children:[Object(r.jsx)("button",{onClick:function(){return e.refresh()},children:"Refresh"}),Object(r.jsx)("div",{children:e.orders.map((function(e){return Object(r.jsx)(Z,{stock:e.stock,id:e.id,price:e.price,volume:e.volume,isBuy:e.isBuy})}))})]})}var te=n(271),ne=n(272),re=function(){var e=Object(k.b)().loginWithRedirect;return Object(r.jsx)(p.a,{color:"inherit",onClick:function(){return e()},children:"Log In"})},ce=n(206),ae=n.n(ce);function se(){var e=Object(k.b)(),t=(e.user,e.isAuthenticated);e.getAccessTokenSilently;return Object(r.jsx)(te.a,{position:"static",children:Object(r.jsxs)(ne.a,{children:[Object(r.jsx)($.a,{edge:"start",color:"inherit","aria-label":"menu",children:Object(r.jsx)(ae.a,{})}),Object(r.jsx)(h.a,{variant:"h6",style:{flexGrow:1},children:"News"}),t?Object(r.jsx)(p.a,{children:"Log Out"}):Object(r.jsx)(re,{})]})})}var ie=n(273),ue=n(274);function oe(e,t,n){return je.apply(this,arguments)}function je(){return(je=Object(y.a)(m.a.mark((function e(t,n,r){var c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c=n.replace(new RegExp(".*\\|"),""),e.next=4,fetch(C+"/addUserFunds?uid="+c,{headers:{Authorization:"Bearer ".concat(t)},method:"POST",body:JSON.stringify({money:r})});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function le(){var e=W().userFunds,t=function(){var e=W(),t=Object(c.useState)([]),n=Object(o.a)(t,2),r=n[0],a=n[1],s=Object(k.b)(),i=s.user,u=s.isAuthenticated,j=s.getAccessTokenSilently,l=function(){var t=Object(y.a)(m.a.mark((function t(){var n,c,s;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!u){t.next=10;break}return t.next=3,j();case 3:return n=t.sent,(c=Object(g.a)(r)).length>0&&a([]),s=c.map((function(e){return oe(n,i.sub,e)})),t.next=9,Promise.all(s);case 9:e.refresh();case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(c.useEffect)((function(){l()}),[i,u,r]),function(e){a([].concat(Object(g.a)(r),[e]))}}();return console.log(e),Object(r.jsx)(b.a,{children:Object(r.jsxs)(d.a,{children:[Object(r.jsxs)(h.a,{children:[" Buying Power: $",e.buyingPower]}),Object(r.jsxs)(h.a,{children:[" Unsettled Funds: $",e.unsettledFunds]}),Object(r.jsx)(p.a,{onClick:function(){return t(100)},children:"Deposit Money"})]})})}var be=Object(j.a)({palette:{type:"dark"}});var de=function(){var e=Object(k.b)(),t=(e.user,e.isAuthenticated);return e.getAccessTokenSilently,Object(r.jsx)("div",{children:Object(r.jsxs)(x.a,{theme:be,children:[Object(r.jsx)(ie.a,{}),Object(r.jsx)(se,{}),Object(r.jsx)(I,{children:Object(r.jsx)(L,{children:t&&Object(r.jsx)(ue.a,{children:Object(r.jsxs)(f.a,{xs:12,container:!0,spacing:3,children:[Object(r.jsx)(f.a,{item:!0,xs:3}),Object(r.jsx)(f.a,{item:!0,xs:6,children:Object(r.jsx)(le,{})}),Object(r.jsx)(f.a,{item:!0,xs:3}),Object(r.jsx)(f.a,{item:!0,xs:3}),Object(r.jsx)(f.a,{item:!0,xs:6,children:Object(r.jsx)(V,{})}),Object(r.jsx)(f.a,{item:!0,xs:3}),Object(r.jsx)(f.a,{item:!0,xs:12}),Object(r.jsx)(f.a,{item:!0,xs:3}),Object(r.jsx)(ee,{}),Object(r.jsx)(f.a,{item:!0,xs:3})]})})})})]})})},he=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,275)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),r(e),c(e),a(e),s(e)}))};i.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(k.a,{domain:"dev-lbvy8s1z.au.auth0.com",clientId:"JeIqV1iKg4l4K4GWTU4r5BqiX31iDFV4",redirectUri:window.location.origin,audience:"stocktrade",scope:"write:add_order read:orders write:delete_order read:user_funds write:add_user_funds",children:Object(r.jsx)(de,{})})}),document.getElementById("root")),he()}},[[234,1,2]]]);
//# sourceMappingURL=main.331aa7fb.chunk.js.map