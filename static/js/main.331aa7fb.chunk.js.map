{"version":3,"sources":["api/endpoint.ts","api/getOrders.ts","state/orders.tsx","api/getUserFunds.ts","state/UserFunds.tsx","api/placeOrder.ts","components/PlaceOrder.tsx","api/useUserId.ts","api/deleteOrder.ts","components/OrderCard.tsx","components/OrdersView.tsx","components/LoginButton.tsx","components/Header.tsx","api/addUserFunds.ts","components/UserFunds.tsx","components/App.tsx","reportWebVitals.ts","index.tsx"],"names":["endpoint","getOrders","accessToken","sub","a","uid","replace","RegExp","fetch","headers","Authorization","method","metadataResponse","json","console","log","Orders","orders","refreshFunc","this","OrderContext","createContext","OrderProvider","props","useState","setOrders","useAuth0","user","isAuthenticated","getAccessTokenSilently","loadOrders","token","loadedOrders","_","isEqual","useEffect","useOrders","refresh","Provider","value","useOrdersContext","useContext","getUserFunds","UserFundsState","userFunds","unsettledFunds","undefined","buyingPower","UserFundsContext","UserFundsProvider","useFunds","setUserData","loadUserFunds","newUserFunds","useUserFunds","useUserFundsContext","placeOrder","order","body","JSON","stringify","theme","createMuiTheme","palette","primary","colors","green","secondary","red","parseIntNan","v","n","parseInt","isNaN","PlaceOrder","ordersState","useFundsContext","deleteOrders","orderCopy","length","promises","map","Promise","all","usePlaceOrder","React","stock","price","volume","state","setState","Card","CardContent","Fragment","Typography","variant","gutterBottom","Grid","container","spacing","item","xs","md","TextField","required","label","fullWidth","onChange","e","target","id","Number","type","helperText","justify","ThemeProvider","Button","color","onClick","isBuy","deleteOrder","orderid","OrderDeleteButton","orderId","orderIds","useDeleteOrder","IconButton","OrderCard","title","CardHeader","action","OrdersVeiw","orderContext","LoginButton","loginWithRedirect","Header","AppBar","position","Toolbar","edge","aria-label","style","flexGrow","addUserFunds","fund","money","UserFunds","addFunds","userFundsContext","funds","setFunds","fundsCopy","useAddUserFunds","App","CssBaseline","Container","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","domain","clientId","redirectUri","window","location","origin","audience","scope","document","getElementById"],"mappings":"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","file":"static/js/main.331aa7fb.chunk.js","sourcesContent":["\r\n\r\nexport const endpoint = \"https://frozen-bayou-79634.herokuapp.com\"","import { useAuth0 } from \"@auth0/auth0-react\";\r\nimport _ from \"lodash\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { Order } from \"../interfaces/Order\";\r\nimport { endpoint } from \"./endpoint\";\r\n\r\n\r\n\r\nexport async function getOrders(accessToken:string, sub:string){\r\n    try {\r\n        const uid = sub.replace(new RegExp(\".*\\\\|\"), \"\");          \r\n\r\n        const metadataResponse = await fetch(endpoint+\"/orders?uid=\"+uid, {\r\n            headers: {\r\n                Authorization: `Bearer ${accessToken}`,\r\n            },\r\n            method: \"GET\",\r\n        });\r\n\r\n        return await metadataResponse.json()\r\n    } catch (e) {\r\n        console.log(e)\r\n    }\r\n \r\n    return []\r\n}\r\n\r\nexport function useOrders() : [Order[], ()=>void]{\r\n    const [orders, setOrders] = useState<Order[]>([]);\r\n    const { user, isAuthenticated, getAccessTokenSilently } = useAuth0();\r\n\r\n    const loadOrders = async ()=>{ \r\n        if(isAuthenticated){\r\n            const token = await getAccessTokenSilently();\r\n            const loadedOrders = await getOrders(token, user.sub);\r\n            if(!_.isEqual(loadedOrders, orders))\r\n                setOrders(loadedOrders)\r\n        }\r\n    }\r\n\r\n    useEffect(()=>{\r\n        loadOrders();\r\n    }, [user, isAuthenticated]);\r\n\r\n    return [orders, loadOrders];\r\n\r\n}","import { useOrders } from '../api/getOrders';\r\nimport { placeOrder } from '../api/placeOrder';\r\nimport { Order } from '../interfaces/Order';\r\nimport {createContext} from 'react'\r\nimport { useContext } from 'react';\r\n\r\n\r\nclass Orders{\r\n    constructor(public orders: Order[] = [],\r\n        private refreshFunc? : ()=>void){}\r\n    \r\n    refresh(){\r\n        if(this.refreshFunc)\r\n            this.refreshFunc();\r\n    }\r\n}\r\n\r\n\r\nexport let OrderContext = createContext(new Orders());\r\n\r\nexport function OrderProvider(props:any){\r\n    const [orders, refresh] = useOrders();\r\n    \r\n    return <OrderContext.Provider {...props} value={new Orders(orders, refresh)} />;\r\n}\r\n\r\nexport function useOrdersContext(){\r\n    return useContext(OrderContext);\r\n}\r\n","import { useAuth0 } from \"@auth0/auth0-react\";\r\nimport _ from \"lodash\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { endpoint } from \"./endpoint\";\r\n\r\n\r\nexport interface UserFunds{\r\n    unsettledFunds?: number;\r\n    buyingPower?: number\r\n}\r\n\r\n\r\nexport async function getUserFunds(accessToken:string, sub:string){\r\n    try {\r\n        const uid = sub.replace(new RegExp(\".*\\\\|\"), \"\");          \r\n\r\n        const metadataResponse = await fetch(endpoint+\"/userFunds?uid=\"+uid, {\r\n            headers: {\r\n                Authorization: `Bearer ${accessToken}`,\r\n            },\r\n            method: \"GET\",\r\n        });\r\n\r\n        return await metadataResponse.json()\r\n    } catch (e) {\r\n        console.log(e)\r\n    }\r\n \r\n    return []\r\n}\r\n\r\nexport function useUserFunds() : [UserFunds, ()=>void]{\r\n    const [useFunds, setUserData] = useState<UserFunds>({unsettledFunds:undefined, buyingPower:undefined});\r\n    const { user, isAuthenticated, getAccessTokenSilently } = useAuth0();\r\n\r\n    const loadUserFunds = async ()=>{ \r\n        if(isAuthenticated){\r\n            const token = await getAccessTokenSilently();\r\n            const newUserFunds = await getUserFunds(token, user.sub);\r\n            if(newUserFunds !== undefined)\r\n                setUserData(newUserFunds);\r\n            else\r\n                setUserData({unsettledFunds:undefined, buyingPower:undefined})\r\n        }\r\n    }\r\n\r\n    useEffect(()=>{\r\n        loadUserFunds();\r\n    }, [user, isAuthenticated]);\r\n\r\n    return [useFunds, loadUserFunds];\r\n\r\n}","import {createContext} from 'react'\r\nimport { UserFunds, useUserFunds } from '../api/getUserFunds';\r\nimport { useContext } from 'react';\r\n\r\n\r\nclass UserFundsState{\r\n    constructor(\r\n        public userFunds: UserFunds = { unsettledFunds :undefined, buyingPower:undefined},\r\n        private refreshFunc?: ()=>void,  \r\n    ){}\r\n\r\n    refresh(){\r\n        if(this.refreshFunc)\r\n            this.refreshFunc();\r\n    }\r\n}\r\n\r\n\r\nexport let UserFundsContext = createContext(new UserFundsState());\r\n\r\nexport function UserFundsProvider(props:any){\r\n    const [userFunds, refresh] = useUserFunds();\r\n    console.log(userFunds)\r\n    \r\n    return <UserFundsContext.Provider {...props} value={new UserFundsState(userFunds, refresh)} />;\r\n}\r\n\r\n\r\nexport function useUserFundsContext(){\r\n    return useContext(UserFundsContext);\r\n}","import { useAuth0 } from \"@auth0/auth0-react\";\r\nimport _ from \"lodash\";\r\nimport { useContext, useEffect, useState } from \"react\";\r\nimport { Order, OrderData } from \"../interfaces/Order\";\r\nimport { useOrdersContext } from \"../state/orders\";\r\nimport { useUserFundsContext } from '../state/UserFunds';\r\nimport { endpoint } from \"./endpoint\";\r\n\r\n\r\n\r\nexport async function placeOrder(accessToken:string, sub:string, order:OrderData){\r\n    try {\r\n        const uid = sub.replace(new RegExp(\".*\\\\|\"), \"\");          \r\n\r\n        const metadataResponse = await fetch(endpoint+\"/order?uid=\"+uid, {\r\n            headers: {\r\n                Authorization: `Bearer ${accessToken}`,\r\n            },\r\n            method: \"POST\",\r\n            body : JSON.stringify(order),\r\n        });\r\n\r\n    } catch (e) {\r\n        console.log(e)\r\n    }\r\n \r\n}\r\n\r\nexport function usePlaceOrder(){\r\n    const ordersState = useOrdersContext();\r\n    const useFundsContext = useUserFundsContext();\r\n    const [orders, setOrders] = useState<OrderData[]>([]);\r\n    const { user, isAuthenticated, getAccessTokenSilently } = useAuth0();\r\n\r\n    const deleteOrders = async ()=>{ \r\n        if(isAuthenticated){\r\n            const token = await getAccessTokenSilently();\r\n            const orderCopy = [...orders];\r\n            if(orders.length > 0)\r\n                setOrders([]);\r\n            const promises = orderCopy.map((order)=>placeOrder(token, user.sub, order))\r\n            await Promise.all(promises);\r\n\r\n            ordersState.refresh();\r\n            useFundsContext.refresh();\r\n        }\r\n        \r\n    }\r\n\r\n    useEffect(()=>{\r\n        deleteOrders();\r\n    }, [user, isAuthenticated, orders]);\r\n\r\n    const addPlaceOrder = (order:OrderData, )=>{ \r\n        setOrders([...orders, order]) \r\n    }\r\n\r\n    return addPlaceOrder;\r\n}\r\n","import { useAuth0 } from '@auth0/auth0-react';\r\nimport { Button, Checkbox, FormControlLabel, Grid, TextField, Typography, colors, ThemeProvider, createMuiTheme, Card, CardContent } from '@material-ui/core';\r\nimport React, { useContext, useEffect } from 'react';\r\nimport { usePlaceOrder } from '../api/placeOrder';\r\nimport { useUserId } from '../api/useUserId';\r\nimport { OrderData } from '../interfaces/Order';\r\nimport { OrderContext } from '../state/orders';\r\n\r\n\r\nconst theme = createMuiTheme({\r\n    palette: {\r\n        primary: colors.green,\r\n        secondary: colors.red\r\n    },\r\n});\r\n\r\nfunction parseIntNan(v: string) {\r\n    const n = parseInt(v);\r\n    \r\n    if (isNaN(n)) {\r\n        return undefined\r\n    } else {\r\n        return n;\r\n    }\r\n}\r\n\r\nexport function PlaceOrder() {\r\n    const placeOrder = usePlaceOrder();\r\n    const uid = useUserId();\r\n    const [state, setState] = React.useState<any>({ stock: 'VAS', price: 20, volume: 1});\r\n\r\n\r\n    const handleStockCode = (e: any) => setState({ ...state, stock: e.target.value })\r\n    const handlePrice = (e: any) => setState({ ...state, price: Number(e.target.value) })\r\n    const handleVolume = (e: any) => setState({ ...state, volume: parseIntNan(e.target.value) })\r\n\r\n    const buyOrder = () => {\r\n        if(state.stock && state.price && state.volume){\r\n            placeOrder({...state, isBuy:true, uid:uid});\r\n        }\r\n    }\r\n\r\n    const sellOrder = () => {\r\n        if(state.stock && state.price && state.volume){\r\n            placeOrder({...state, isBuy:false, uid:uid});\r\n        }\r\n    }\r\n    \r\n\r\n    console.log(state)\r\n\r\n\r\n    return <Card>\r\n        <CardContent>\r\n            <React.Fragment>\r\n                <Typography variant=\"h6\" gutterBottom>\r\n                    Payment method\r\n                </Typography>\r\n                <Grid container spacing={3}>\r\n                    <Grid item xs={12} md={4}>\r\n                        <TextField required label=\"Stock Code\" fullWidth onChange={handleStockCode} value={state.stock}/>\r\n                    </Grid>\r\n                    <Grid item xs={12} md={4}>\r\n                        <TextField required id=\"price\" label=\"Price\" fullWidth onChange={handlePrice} value={state.price} />\r\n                    </Grid>\r\n                    <Grid item xs={12} md={4}>\r\n                        <TextField\r\n                            type=\"number\"\r\n                            required\r\n                            id=\"volume\"\r\n                            label=\"Volume\"\r\n                            helperText=\"number of stocks\"\r\n                            fullWidth\r\n                            value={state.volume}\r\n                            onChange={handleVolume}\r\n                        />\r\n                    </Grid>\r\n                    <Grid justify='space-evenly' container>\r\n                        <ThemeProvider theme={theme}>\r\n                            <Button variant='contained' color=\"primary\" onClick={buyOrder}>Buy Order</Button>\r\n                            <Button variant='contained' color=\"secondary\" onClick={sellOrder}>Sell Order</Button>\r\n                        </ThemeProvider>\r\n                    </Grid>\r\n                </Grid>\r\n            </React.Fragment>\r\n        </CardContent>\r\n    </Card>\r\n\r\n\r\n}","import { useAuth0 } from \"@auth0/auth0-react\";\r\n\r\n\r\nexport function useUserId(){\r\n    const { user } = useAuth0();\r\n    return user.sub.replace(new RegExp(\".*\\\\|\"), \"\");          \r\n}","import { useAuth0 } from \"@auth0/auth0-react\";\r\nimport _ from \"lodash\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { useOrdersContext } from \"../state/orders\";\r\nimport { useUserFundsContext } from \"../state/UserFunds\";\r\nimport { endpoint } from \"./endpoint\";\r\n\r\n\r\n\r\nexport async function deleteOrder(accessToken:string, sub:string, orderid:number){\r\n    try {\r\n        const uid = sub.replace(new RegExp(\".*\\\\|\"), \"\");          \r\n\r\n        await fetch(endpoint+\"/order?uid=\"+uid+\"&orderid=\"+orderid, {\r\n            headers: {\r\n                Authorization: `Bearer ${accessToken}`,\r\n            },\r\n            method: \"DELETE\",\r\n        });\r\n    } catch (e) {\r\n        console.log(e)\r\n    }\r\n \r\n}\r\n\r\nexport function useDeleteOrder(){\r\n    const ordersState = useOrdersContext();\r\n    const useFundsContext = useUserFundsContext();\r\n\r\n    const [orderIds, setOrders] = useState<number[]>([]);\r\n    const { user, isAuthenticated, getAccessTokenSilently } = useAuth0();\r\n\r\n    const deleteOrders = async ()=>{ \r\n        if(isAuthenticated){\r\n            const token = await getAccessTokenSilently();\r\n            const orderCopy = [...orderIds];\r\n            if(orderIds.length > 0)\r\n                setOrders([]);\r\n            const promises = orderCopy.map((orderId)=>deleteOrder(token, user.sub, orderId))\r\n            await Promise.all(promises);\r\n           \r\n            ordersState.refresh();\r\n            useFundsContext.refresh();\r\n        }\r\n        \r\n    }\r\n\r\n    useEffect(()=>{\r\n        deleteOrders();\r\n    }, [user, isAuthenticated, orderIds]);\r\n\r\n    const addDeleteOrder = (orderId:number)=>{ \r\n        setOrders([...orderIds, orderId]) }\r\n\r\n    return addDeleteOrder;\r\n\r\n}","import React, { useContext } from \"react\";\r\nimport {Card, CardHeader, CardContent, Typography, IconButton} from \"@material-ui/core\"\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport { useDeleteOrder } from \"../api/deleteOrder\";\r\nimport { OrderContext } from \"../state/orders\";\r\n\r\ninterface OrderProps {\r\n    id: number,\r\n    isBuy: boolean,\r\n    price: number,\r\n    volume: number,\r\n    stock: string\r\n}\r\n\r\n\r\ninterface OrderDeleteButtonProps{\r\n    orderId:number\r\n}\r\n\r\nfunction OrderDeleteButton({orderId} : OrderDeleteButtonProps){\r\n    const deleteOrder = useDeleteOrder();\r\n    \r\n    return <IconButton onClick={()=>{\r\n        deleteOrder(orderId);\r\n    }} > <DeleteIcon/></IconButton>\r\n}\r\n\r\nexport function OrderCard({ id, isBuy, price, volume, stock }: OrderProps) {\r\n\r\n    const title = (isBuy?\"Buy\":\"Sell\") + \" \" + stock;\r\n    return <Card>\r\n       \r\n        <CardContent>\r\n        <CardHeader title={title}  action={<OrderDeleteButton orderId={id}/>} />\r\n            <Typography>${price} x {volume}</Typography>\r\n        </CardContent>\r\n    </Card>\r\n};","import React, { useContext } from \"react\";\r\nimport { OrderCard } from \"./OrderCard\";\r\nimport _ from 'lodash';\r\nimport { useOrders } from \"../api/getOrders\";\r\nimport { OrderContext } from \"../state/orders\";\r\n\r\nexport default function OrdersVeiw(){\r\n  const orderContext = useContext(OrderContext);\r\n  return <div>\r\n    <button onClick={()=>orderContext.refresh()} >Refresh</button>\r\n    <div>\r\n      {orderContext.orders.map(order => <OrderCard stock={order.stock} id={order.id} price={order.price} volume={order.volume} isBuy={order.isBuy}/> )}\r\n    </div>\r\n\r\n  </div>\r\n};","import React from \"react\";\r\nimport { useAuth0 } from \"@auth0/auth0-react\";\r\nimport { Button } from \"@material-ui/core\";\r\n\r\nconst LoginButton = () => {\r\n  const { loginWithRedirect } = useAuth0();\r\n\r\n  return <Button color='inherit' onClick={() => loginWithRedirect()}>Log In</Button>;\r\n};\r\n\r\nexport default LoginButton;","import { AppBar, Button, IconButton, Toolbar, Typography } from \"@material-ui/core\";\r\nimport React from \"react\";\r\nimport LoginButton from \"./LoginButton\";\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport { useAuth0 } from \"@auth0/auth0-react\";\r\n\r\n\r\nexport function Header(){\r\n    const { user, isAuthenticated, getAccessTokenSilently } = useAuth0();\r\n    return <AppBar position=\"static\">\r\n  <Toolbar>\r\n    <IconButton edge=\"start\" color=\"inherit\" aria-label=\"menu\">\r\n      <MenuIcon />\r\n    </IconButton>\r\n    <Typography variant=\"h6\" style={{flexGrow: 1}}>\r\n      News\r\n    </Typography>\r\n    \r\n    {isAuthenticated ? <Button>Log Out</Button> : <LoginButton/> }\r\n  </Toolbar>\r\n</AppBar>\r\n}","import { useAuth0 } from \"@auth0/auth0-react\";\r\nimport _ from \"lodash\";\r\nimport { useContext, useEffect, useState } from \"react\";\r\nimport { Order, OrderData } from \"../interfaces/Order\";\r\nimport { useOrdersContext } from \"../state/orders\";\r\nimport { useUserFundsContext } from '../state/UserFunds';\r\nimport { endpoint } from \"./endpoint\";\r\n\r\n\r\n\r\nexport async function addUserFunds(accessToken:string, sub:string, fund:number){\r\n    try {\r\n        const uid = sub.replace(new RegExp(\".*\\\\|\"), \"\");          \r\n\r\n        await fetch(endpoint+\"/addUserFunds?uid=\"+uid, {\r\n            headers: {\r\n                Authorization: `Bearer ${accessToken}`,\r\n            },\r\n            method: \"POST\",\r\n            body : JSON.stringify({money: fund}),\r\n        });\r\n\r\n    } catch (e) {\r\n        console.log(e)\r\n    }\r\n \r\n}\r\n\r\nexport function useAddUserFunds(){\r\n    const userFundsContext = useUserFundsContext();\r\n    const [funds, setFunds] = useState<number[]>([]);\r\n    const { user, isAuthenticated, getAccessTokenSilently } = useAuth0();\r\n\r\n    const addFunds = async ()=>{ \r\n        if(isAuthenticated){\r\n            const token = await getAccessTokenSilently();\r\n            const fundsCopy = [...funds];\r\n            if(fundsCopy.length > 0)\r\n                setFunds([]);\r\n            const promises = fundsCopy.map((fund)=>addUserFunds(token, user.sub, fund))\r\n            await Promise.all(promises);\r\n\r\n            userFundsContext.refresh();\r\n        }\r\n    }\r\n\r\n    useEffect(()=>{\r\n        addFunds();\r\n    }, [user, isAuthenticated, funds]);\r\n\r\n    const addFundsToQueue = (fund:number)=>{ \r\n        setFunds([...funds, fund]) \r\n    }\r\n\r\n    return addFundsToQueue;\r\n}\r\n","import React from \"react\";\r\nimport { Button, Card, CardContent, Typography } from \"@material-ui/core\"\r\nimport { useUserFundsContext } from '../state/UserFunds';\r\nimport { useAddUserFunds } from \"../api/addUserFunds\";\r\n\r\n\r\nexport function UserFunds() {\r\n    const {userFunds} = useUserFundsContext();\r\n    const addFunds = useAddUserFunds();\r\n    console.log(userFunds)\r\n    return <Card>\r\n        <CardContent>\r\n            <Typography> Buying Power: ${userFunds.buyingPower}</Typography>\r\n            <Typography> Unsettled Funds: ${userFunds.unsettledFunds}</Typography>\r\n            <Button onClick={()=>addFunds(100)}>Deposit Money</Button>\r\n        </CardContent>\r\n    </Card>\r\n};","import React from 'react';\nimport { PlaceOrder } from './PlaceOrder';\nimport OrdersVeiw from './OrdersView';\nimport { Header } from './Header';\nimport { Container, createMuiTheme, CssBaseline, Grid, Paper, ThemeProvider } from '@material-ui/core';\nimport { useAuth0 } from '@auth0/auth0-react';\nimport { OrderProvider } from '../state/orders';\nimport { UserFundsProvider } from '../state/UserFunds';\nimport { UserFunds } from './UserFunds';\n\nconst theme = createMuiTheme({\n  palette: {\n    type: 'dark',\n  }\n});\n\nfunction App() {\n  const { user, isAuthenticated, getAccessTokenSilently } = useAuth0();\n  return (\n    <div>\n      <ThemeProvider theme={theme}>\n        <CssBaseline />\n        <Header />\n        <OrderProvider>\n          <UserFundsProvider>\n            {isAuthenticated && <Container>\n              <Grid xs={12} container spacing={3}>\n\n                <Grid item xs={3} />\n                <Grid item xs={6}>\n                  <UserFunds />\n                </Grid>\n                <Grid item xs={3} />\n\n                <Grid item xs={3} />\n                <Grid item xs={6}>\n                  <PlaceOrder />\n                </Grid>\n                <Grid item xs={3} />\n\n                <Grid item xs={12} />\n\n                <Grid item xs={3} />\n                <OrdersVeiw />\n                <Grid item xs={3} />\n              </Grid>\n            </Container>}\n          </UserFundsProvider>\n        </OrderProvider>\n      </ThemeProvider>\n    </div>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\nimport reportWebVitals from './reportWebVitals';\nimport { Auth0Provider } from \"@auth0/auth0-react\";\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <Auth0Provider\n      domain=\"dev-lbvy8s1z.au.auth0.com\"\n      clientId=\"JeIqV1iKg4l4K4GWTU4r5BqiX31iDFV4\"\n      redirectUri={window.location.origin}\n      audience= \"stocktrade\"\n      scope=\"write:add_order read:orders write:delete_order read:user_funds write:add_user_funds\"\n    >\n\n      <App />\n\n    </Auth0Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}